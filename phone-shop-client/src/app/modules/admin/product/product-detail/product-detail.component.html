<div class="product-detail-contain">
  <h1 class="title mb-3">{{data.title || 'Chi tiết sản phẩm'}}</h1>
  <form class="mb-3" [formGroup]="form" [enctype]="data.type==='add'?'multipart/form-data':''">
    <div class="row">
      <div class="col-12 col-md-8">
        <mat-form-field>
          <mat-label for="" class="form-label">Tên sản phẩm</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required formControlName="name">
        </mat-form-field>
      </div>
      <div class="col-12 col-md-4">
        <mat-form-field>
          <mat-label for="" class="form-label">Hệ điều hành</mat-label>
          <mat-select matNativeControl required formControlName="operation"
            [value]="this.form.controls['operation'].value">
            <mat-option *ngFor="let operationOption of operationOptions"
              value="{{operationOption.value}}">{{operationOption.value}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">CPU</mat-label>
          <mat-select matNativeControl required formControlName="cpu" [value]="this.form.controls['cpu'].value">
            <mat-option *ngFor="let cpuOption of cpuOptions"
              value="{{cpuOption.value}}">{{cpuOption.value}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">RAM</mat-label>
          <mat-select matNativeControl required formControlName="ram" [value]="this.form.controls['ram'].value">
            <mat-option *ngFor="let ramOption of ramOptions"
              value="{{ramOption.value}}">{{ramOption.value}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Dung lượng bộ nhớ(ROM)</mat-label>
          <mat-select matNativeControl required formControlName="rom" [value]="this.form.controls['rom'].value">
            <mat-option *ngFor="let romOption of romOptions"
              value="{{romOption.value}}">{{romOption.value}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Thời lượng pin</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required formControlName="pin">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Độ lớn màn hình</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" type="number" required
            formControlName="screenSize" type="number" min="0">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Độ phân giải</mat-label>
          <mat-select matNativeControl required formControlName="screenResolution"
            [value]="this.form.controls['screenResolution'].value">
            <mat-option *ngFor="let hzOption of hzOptions" value="{{hzOption.value}}">{{hzOption.value}}Hz</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Camera trước</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required formControlName="frontCamera">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Camera sau</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required required
            formControlName="behindCamera">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Cảm ứng màn hình</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required required
            formControlName="screenTouch">
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Giá nhập</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" type="number" min="0" required required
            formControlName="importPrice">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Giá bán</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" type="number"
            min="{{form.controls['importPrice'].value}}" required required formControlName="soldPrice" type="number"
            min="0">
        </mat-form-field>
      </div>
      <div class="col-12 col-md 4">
        <mat-form-field>
          <mat-label for="" class="form-label">Hãng sản xuất</mat-label>
          <mat-select matNativeControl required formControlName="brandId" [value]="this.form.controls['brandId'].value">
            <mat-option *ngFor="let brand of brandList" value="{{brand.id}}">{{brand.name}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <mat-form-field>
          <mat-label for="" class="form-label">Slug</mat-label>
          <input matInput [readonly]="data.type === 'view'" placeholder="" required required formControlName="slug">
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="mt-3" *ngIf="data.type === 'add'">
        <div>
          <label for="file" class="form-label">Ảnh sản phẩm <span class="bold">({{fileStr.length == 0? '0':
              fileStr}})</span> file</label>
        </div>
        <!-- <input #fileInput type="file" multiple id="file" formControlName="phoneImages"> -->
        <button type="button" mat-raised-button (click)="fileUpload.click()">Choose File</button>
        <input hidden (change)="onFileSelected($event)" multiple #fileUpload type="file" id="file">
      </div>
    </div>
    <div class="row">
      <div class="mt-2">
        <label for="" class="form-label">Tính năng khác</label>
        <textarea matInput [readonly]="data.type === 'view'" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
          cdkAutosizeMinRows="2" cdkAutosizeMaxRows="3" formControlName="otherBenefit"></textarea>
      </div>
    </div>

    <div class="row">
      <div class="mt-2">
        <label for="" class="form-label">Mô tả</label>
        <textarea matInput [readonly]="data.type === 'view'" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
          cdkAutosizeMinRows="3" cdkAutosizeMaxRows="5" formControlName="description"></textarea>
      </div>
    </div>
  </form>
  <div class="d-flex btn-container">
    <button class="me-3 btn btn-common-base" (click)="onCreate()" *ngIf="data.type === 'add'" [disabled]="form.invalid"
      [ngClass]="form.invalid?'disabled':''">Tạo mới</button>
    <button class="me-3 btn btn-common-base" (click)="onUpdate()" *ngIf="data.type === 'edit'" [disabled]="form.invalid"
      [mat-dialog-close]="true" [ngClass]="form.invalid?'disabled':''">Cập nhật</button>
    <!-- [mat-dialog-close]="true" -->
    <button class="btn btn-common-reject" mat-dialog-close>Thoát</button>
  </div>
</div>